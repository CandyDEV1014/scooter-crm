(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8170341a"],{"122b":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",[t("v-row",[t("v-col",{staticClass:"d-flex justify-center",attrs:{cols:"12"}},[t("v-card",{staticStyle:{width:"100%","max-width":"600px"}},[t("v-card-title",{staticClass:"dialog-title"},[e._v(" Edit Scooter ")]),t("v-card-text",[t("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t("v-container",{staticClass:"px-0",attrs:{fluid:""}},[t("v-row",[t("v-col",{attrs:{cols:"12",sm:"12"}},[t("v-text-field",{attrs:{color:"primary",label:"Name",rules:e.rules.name,required:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("v-col",{attrs:{cols:"12",sm:"6"}},[t("v-text-field",{attrs:{color:"primary",label:"Phone Number",rules:e.rules.phone,required:""},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),t("v-col",{attrs:{cols:"12",sm:"6"}},[t("v-text-field",{attrs:{color:"primary",label:"Barcode",rules:e.rules.barcode,required:""},model:{value:e.form.barcode,callback:function(t){e.$set(e.form,"barcode",t)},expression:"form.barcode"}})],1),t("v-col",{attrs:{cols:"12",sm:"6"}},[t("v-text-field",{attrs:{color:"primary",label:"Model",rules:e.rules.model,required:""},model:{value:e.form.model,callback:function(t){e.$set(e.form,"model",t)},expression:"form.model"}})],1),t("v-col",{attrs:{cols:"12",sm:"6"}},[t("v-text-field",{attrs:{color:"primary",label:"TERMEN APROXIMATIV",rules:e.rules.termen,required:""},model:{value:e.form.termen,callback:function(t){e.$set(e.form,"termen",t)},expression:"form.termen"}})],1),t("v-col",{attrs:{cols:"12"}},[t("v-textarea",{attrs:{color:"primary",label:"Problem",rows:3,rules:e.rules.problem,required:""},model:{value:e.form.problem,callback:function(t){e.$set(e.form,"problem",t)},expression:"form.problem"}})],1),t("v-col",{attrs:{cols:"12"}},[t("v-textarea",{attrs:{color:"primary",label:"Notes",rows:3},model:{value:e.form.notes,callback:function(t){e.$set(e.form,"notes",t)},expression:"form.notes"}})],1),t("v-col",{attrs:{cols:"12"}},[t("v-text-field",{attrs:{color:"primary",label:"Price",rules:e.rules.price,required:""},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),t("v-col",{attrs:{cols:"12"}},[t("v-select",{attrs:{color:"primary",label:"Status",placeholder:"Select a Status",items:e.status,"item-text":"title","item-value":"id",rules:e.rules.status,required:""},model:{value:e.form.statusId,callback:function(t){e.$set(e.form,"statusId",t)},expression:"form.statusId"}})],1),e.form.statusId>1?t("v-col",{attrs:{cols:"12"}},[t("v-text-field",{attrs:{color:"primary",label:"Done By",disabled:""},model:{value:e.form.doneBy,callback:function(t){e.$set(e.form,"doneBy",t)},expression:"form.doneBy"}})],1):e._e(),t("v-col",{attrs:{cols:"12"}},[e.form.signature?t("div",{staticClass:"signature-wrapper"},[t("span",{staticClass:"text-caption"},[e._v("Signature")]),t("div",{staticClass:"signature-img"},[t("v-btn",{staticClass:"close-btn",staticStyle:{background:"#ff5252"},attrs:{"x-small":"",icon:"",color:"white"},on:{click:function(t){return e.removeSignature()}}},[t("v-icon",[e._v("mdi-close")])],1),t("v-img",{attrs:{src:e.signature,alt:"signature","max-height":"150","max-width":"120"}})],1)]):t("vuetify-upload",{attrs:{max:1,"can-delete":"",accept:"image/*",color:"accent"},model:{value:e.images,callback:function(t){e.images=t},expression:"images"}})],1)],1)],1)],1)],1),t("v-card-actions",{staticClass:"dialog-actions"},[t("v-spacer"),t("v-btn",{attrs:{color:"success",small:""},on:{click:e.handlePrint}},[e._v(" Print PDF ")]),t("v-btn",{attrs:{color:"primary",small:""},on:{click:e.updateScooter}},[e._v(" Save ")])],1)],1)],1)],1),t("VueHtml2pdf",{ref:"html2Pdf",attrs:{"show-layout":!1,"float-layout":!0,"enable-download":!1,"preview-modal":!0,"paginate-elements-by-height":1400,filename:"download","pdf-quality":2,"manual-pagination":!1,"pdf-format":"a4","pdf-orientation":"portrait","pdf-content-width":"100%"}},[t("section",{attrs:{slot:"pdf-content"},slot:"pdf-content"},[t("pdf-content",{attrs:{item:e.form}})],1)]),t("v-snackbar",{attrs:{timeout:"3000",color:e.snackBar.type,top:"",right:""},model:{value:e.snackBar.enabled,callback:function(t){e.$set(e.snackBar,"enabled",t)},expression:"snackBar.enabled"}},[e._v(" "+e._s(e.snackBar.message)+" ")])],1)},s=[],o=a("8ef7"),l=a("6480"),i={name:"EditScooter",components:{PdfContent:o["a"],VueHtml2pdf:l["a"]},data(){return{form:{},images:[],rules:{name:[e=>!!e||"Name is required"],phone:[e=>!!e||"Phone Number is required"],barcode:[e=>!!e||"Barcode is required",e=>Number.isInteger(Number(e))||"Barcode must be a number"],model:[e=>!!e||"Model is required"],termen:[e=>!!e||"TERMEN APROXIMATIV is required"],problem:[e=>!!e||"Problem is required"],price:[e=>Number.isInteger(Number(e))||"Price must be a number"],status:[e=>!!e||"Status is required"],imageRules:[e=>e.length>0||"This image is required"]},valid:!0,status:[{id:1,title:"IN LUCRU"},{id:2,title:"FINALIZAT"},{id:3,title:"IESIT"}],snackBar:{type:"default",enabled:!1,message:""}}},created(){},mounted(){this.getItem()},computed:{signature(){return this.form.signature?"http://188.213.21.231/uploads/"+this.form.signature:null}},methods:{getItem(){this.$http.get("scooter/"+this.$route.params.id).then(e=>{200===e.status&&(this.form=e.data.result)}).catch(e=>{this.snackBar.type="error",this.snackBar.enabled=!0,this.snackBar.message="Cannot get scooter item"})},handlePrint(){this.$refs.html2Pdf.generatePdf()},removeSignature(){this.form.signature=""},updateScooter(){this.update=()=>{this.form.statusId>1&&(this.form.doneBy=this.$store.getters.getName),console.log(this.form),this.$http.put("scooter",this.form).then(e=>{200===e.status&&(this.getItem(),this.snackBar.type="success",this.snackBar.enabled=!0,this.snackBar.message="Successfully update Scooter")}).catch(e=>{console.log(e),this.snackBar.type="error",this.snackBar.enabled=!0,this.snackBar.message="Cannot update Scooter"})};const e=this.$refs.form.validate();if(e)if(this.images.length){const e=new FormData;e.append("file",this.images[0].file),this.$http.post("scooter/uploadSignature",e,{headers:{"X-Requested-With":"XMLHttpRequest"}}).then(e=>{200===e.status&&(this.form.signature=e.data.filename,this.update())}).catch(e=>{console.log(e)})}else this.update()}}},n=i,c=(a("256c"),a("2877")),m=Object(c["a"])(n,r,s,!1,null,"505dbc5b",null);t["default"]=m.exports},"256c":function(e,t,a){"use strict";a("de7a")},de7a:function(e,t,a){}}]);
//# sourceMappingURL=chunk-8170341a.7495c430.js.map